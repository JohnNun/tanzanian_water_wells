# Tanzanian Water Wells
![](/images/water_droplet.jpg)
Tanzania is a developing country with a population exceeding 57 million. The country of Tanzania faces significant challenges in delivering clean water to its citizens. While numerous water points have been constructed throughout the country, many require repairs or no longer function altogether. Due to limitations in resources, the Tanzanian government may not be able to efficiently monitor and maintain all built pumps and wells. The goal of this project is the development and training of a predictive classifier model to predict which water sources are in need of repairs, allowing for a more effective allocation of resources for pump and well maintenance.

The data used for this project was gathered from [Taarifa](https://taarifa.org/) and [Tanzanian Ministry of Water](https://www.maji.go.tz/). This dataset contains information on over 50,000 pumps and wells. In this project the focus is primarily on pumps and wells serving populated areas of Tanzania.  
To prepare the data, I removed unique identifiers and redundant data. Rows with incomplete data or missing information that couldn’t be filled with already existing data—such as unconstructed sites or locations without a population—were also removed. To simplify the prediction task, the condition labels for the pumps and wells were converted into a binary classification: 'functional' or 'non-functional'.

The model used in this project after initial testing with both a decision tree and K-Nearest Neighbors (KNN) classifiers, KNN was chosen due to its adaptability and base-level performance. Also, to ensure all features are taken into account equally I scaled the data using a Min Max scaler, and tuned model parameters to optimize predictive accuracy. Through this approach, the model aims to enhance the Tanzanian government’s ability to properly prioritize repairs, improving access to clean water for the Tanzanian population.

# Business Understanding
As a developing country, Tanzania struggles with providing clean water to its population of over 57,000,000. As it is now, there are many water points that have already been built throughout the country, but some need repair while others have failed altogether. The government of Tanzania may not have the necessary resources to be able to effectively and efficiently check and repair all pumps, and wells at the same time. By using a predictive classifier model the Tanzania government hopes to be able to predict which pumps or wells may need repairs to effectively send out technicians to complete said repairs.

By using information about the sort of pump, year of installation, etc. I am to build a prediction classifier to predict the condition of a water well or pump as either 'functional' or 'non-functional'. Through the predictions of the model, the government of Tanzania may be able to effectively and efficiently allocate the necessary resources to locations that are in desperate need of repairs.

# Data Understanding
The data used for this project was gathered from [Taarifa](https://taarifa.org/) and [Tanzanian Ministry of Water](https://www.maji.go.tz/). The information that can be found in this data set ranges from the year the pump, water well, etc. was first constructed, to who funded the construction of that specific water source. This dataset also provides an abundance of categorical data, for example longitude/latitude, type of water, etc. In total this dataset holds information on over 50,000 plus water sources ranging from first constructed in 1966 up to 2010, and even water sources that are yet to be fully constructed. Since I am trying to predict which pumps and wells are in need of repairs to provide clean water to its population, I will be primarily focusing on rows and columns for pumps and water wells that have a civilian population who heavily rely on these pumps and wells for water.

# Data Preparation
To prepare the data I first drop the 'id' column from the labels data frame as this data frame is sorted in the exact same way as the overall data making it easier to combine both data frames.

After concating the two data sets I drop columns that are unique identifiers, such as longitude and latitude as data like this doesn't really help with the prediction. There are also columns with different titles but have the same information as a different column. For example, the 'quantity' and 'quantity_group', both have the exact information on how much water remains in the specific water source, so I kept the group column and dropped the other. I further drop rows with a value of 0 in the 'construction_year' column of the data set as well as the 'population' column as this tells me that this specific water pump is yet to be fully constructed, and if the population of where the pump is 0 then that also tells me there is no one around to use the pump and wouldn’t be as high as a priority as compared to a pump with a population of 100+. I also drop rows from the data set where the quantity_group value is 'dry' as a depleted water source won’t see its pump get any use.

After dropping some of the data I change some of the values in the data to make it more uniform and fit a more binary format. For example, the 'status_group' column has a 'functional needs repair' value, while the pump can still be considered as 'functional' it is in need of repairs so I replaced all 'functional needs repair' with 'non functional'. In doing so the model will only have two possible results 'functional' or 'non functional'. Changing these values will also help slightly balance out the data. As it is currently, the data is heavily weighted towards 'functional' and that can shift results more towards a ‘functional’ result when in fact the pump could be broken.

Finally, In the 'public_meeting' column, there are quite a few NaN values. In order to keep as much of this data as possible, I filled in NaN values for 'public_meeting' based on the 'waterpoint_type' values, if it is a communal standpipe (singular or multiple) in the 'waterpoint_type' column then NaN was replaced with True, any other values such as 'hand pump' 'cattle trough', etc. were replaced with False.

# Modeling
The data is full of categorical values, in order to use this data with a KNN classifier I first turn the categorical data into numerical values. After converting the categorical data into numerical data, I created two base models with default parameters, decision tree and K-Nearest Neighbors (KNN) for initial testing. Ultimately I went with the KNN model as it yielded the best results at the base level. I also went with this classifier as its non-parametric, meaning it doesn’t make assumptions based on how the data is distributed. KNN can also adapt to new examples or data points. Because data is stored in memory, when there is new data present, it will adjust and incorporate the new information into future predictions.

Since KNN is a distance-based machine learning algorithm, I scale the data with a Min Max scaler. I went with a min max scaler to ensure all features are taken into consideration equally and further lower the potential of a model bias. As the data is rather large with over 30k rows I do use the n_jobs parameter to give the KNN models more computing power to help speed up the computing process. For model tuning I increased the number of points the model should look at before making its prediction, I did this because a lower value could lead the model to be much more sensitive to noise and outliers that could be found in the data. I also ran the model with a different algorithm meant for complex data as well as 'l1' metric.

Before KNN model 3, I ran code that can help narrow down or even find the best value for k. The resulting k value that would yield the best result was 4, but in the end I chose the k value to be 5 to avoid a potential "tie" due to an even value. I also didn’t go with a value of 3 to potentially avoid overfitting as this value can be considered too low.

# Evaluation
For this project, the **"non functional" category is seen as the positive outcome, and "functional" as the negative** since we are trying to find which pumps and/or wells are in need of repairs. The final model in the [Tanzanian Water Wells Jupyter Notebook](tanzanian_water_wells_notebook.ipynb), gives the lowest false negatives, and almost the lowest false positive. In this case, a lower false negative is beneficial because that means **the model is able to properly categorize between "functional" or "non functional"**. As for the false positives, the final model appears to be putting about 10% as "non functional" but may be actually "functional", considering the overall size of the of the dataset of 50k+ rows, a total of 5k of “non functional” but may possibly actually “functional”.

In terms of performance, the final model got an **average of 83 for its classification scores with the test data**, these results are very similar with those of the training data. With the model’s precision, recall, and f1-scores being almost exact, this tells us the model generalized the data well and is very unlikely to overfit new or unseen data. The final model got an ROC curve score of .92, further solidifying this model’s ability distinguishing between 'functional' and 'non functional' predictions. For cross validation scores, the final model's lowest score showed an **accuracy of 70, while the highest score calculated was an 82** so this model will do fairly well with new data when it is presented.

## Limitations
A limitation this data presents is that it doesn’t necessarily **provide any information on the amount of usage that the individual water sources get on any given day**. We can only really assume that a water source in an area with a population of 100 gets more use than one with a population of 10, but without really knowing usage we **can’t really know if a water source with a population of 10 is actually the one getting much more use than the population of 100**.

The dataset provides location information such as **longitude/latitude, region codes, etc.**, a lot of this information is more of a unique identifier like the 'id' column in the dataset and adds very little benefit to a model’s prediction outcome. Also, **quite a few columns have the same values but titled differently, so in a way its redundant data**. While cleaning these rows out of the dataset wasn’t an issue, it is data that could’ve possibly help with the model predictions if it contained other information.

# Conclusion
As it is now, the final model **is able to properly categorize between "functional" or "non functional"**. When testing the model with both training and test data, the model’s precision, recall, and f1-scores were almost the exact same, this tells us the model generalized the data well making it unlikely to overfit with new or unseen data. That being said, its very possible **the model could still be fine-tuned or even tweaked further to increase the model’s precision with its predictions**. Overall, the Final KNN model is a good start when it comes to predicting which water pumps are "functional" and "non functional".

## Repository Structure
- images
- README.md
- [Presentation](tanzanian_water_wells_presentation.pdf)
- [Notebook](tanzanian_water_wells_notebook.ipynb)
